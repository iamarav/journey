{const e=Journey();function Journey(){const e=window.__lsKeys;function t(){const e=document.querySelector("body.journey");if(e)return{name:e.querySelector("#name"),greetings:e.querySelector("#greeting"),clocks:e.querySelector("#clocks"),bgOverlay:e.querySelector("#bg-overlay"),bookmarks:e.querySelector("#bookmarks"),search:e.querySelector("#search"),searchBox:e.querySelector("#search-box")}}return{lsKeys:e,init:function(){localStorage.getItem(e.CONFIG)||localStorage.setItem(e.CONFIG,JSON.stringify(__defaultConfig)),onKeyPress([...__magicKeys.OPEN_CONFIG],(()=>{window.location.href="./config.html"}))},setWidgets:function(...n){const o=JSON.parse(localStorage.getItem(e.CONFIG));setBackgroundImage({config:o,dom:t,lsKeys:e}),n.forEach((n=>n({config:o,dom:t,lsKeys:e}).run()))},start:function(){},clearStorage:function(){localStorage.clear(),window.location.reload()}}}function WidgetSearch({dom:e}){return{run:function(){let t="Search anything";__magicKeys.SEARCH&&(onKeyPress([...__magicKeys.SEARCH],(()=>{e().searchBox.focus()})),t+=` or press "${__magicKeys.SEARCH}"`),e().searchBox.placeholder=t}}}function WidgetWelcome({config:e,dom:t,lsKeys:n}){const o=e?.widgets?.greeting;function r(e){const t=localStorage.getItem(n.NAME);if(t)return e(t);const o=prompt("Please enter your name");if(!o)return r(e);localStorage.setItem(n.NAME,o),e(o)}return{run:function(){o&&r((e=>{t().greetings.innerHTML=function(){const e=(new Date).getHours(),t=o?.greetings;if(t)return e>=5&&e<12?t?.MORNING:e>=12&&e<16?t?.AFTERNOON:e>=16&&e<20?t?.EVENING:t?.NIGHT}()+",&nbsp;",t().name.innerText=e}))}}}function WidgetClock({config:e,dom:t}){const n=e.widgets.clocks,o={};function r(){const e=new Date;for(const t of Object.values(o))t.time.innerText=e.toLocaleString("en-IN",{timeZone:t.tz.timezone}).split(", ")[1]}return{run:function(){n&&(!function(){if(!n)return;let e="";n?.timezones?.forEach((t=>{e+='<div class="time-card">',e+=`<h2 class="time" id="${t.slug}-time">Loading...</h2>`,e+=`<p class="date" id="${t.slug}-date">Loading...</p>`,e+=`<h2 class="time-zone">${t.name}</h2>`,e+="</div>"})),t().clocks.innerHTML=e,n?.timezones?.forEach((e=>{o[e.slug]={date:document.getElementById(e.slug+"-date"),time:document.getElementById(e.slug+"-time"),tz:e}}))}(),r(),function(){const e=new Date;for(const t of Object.values(o))t.date.innerText=e.toLocaleString("en-IN",{timeZone:t.tz.timezone}).split(", ")[0]}(),setInterval(r,n.refresh.refreshTime),setInterval(r,n.refresh.refreshDate))}}}function WidgetBookmarks({config:e,dom:t}){const n=e?.widgets?.bookmarks;return{run:function(){n&&function(){if(!n)return;const{urlToFetchFavicon:e}=n;let o="";n.sections.forEach((t=>{o+=`<h4 class="bs-title text-center">${t.title}</h4>`,o+='<div class="bookmark-container">',t.links.forEach(((t,n)=>{const r=e.replace("{domain}",t.url),s=n<3?"large":"small";o+=`<a href="${t.url}" class="bookmark bm-link ${s}">\n          <img class="bm-icon" alt="${t.name}" src="${r}" />\n          <span class="bm-name">&nbsp;${t.name}</span>        \n        </a>`}))})),o+="</div>",t().bookmarks.innerHTML=o}()}}}function onKeyPress(e,t){document.addEventListener("keypress",(function(n){if(!Array.isArray(e))return;const o=n.key,r=n.which||n.keyCode;return e.includes(r)||e.includes(o)?(n.preventDefault(),t(n)):void 0}))}async function setBackgroundImage({config:e,lsKeys:t,dom:n}){const o=localStorage.getItem(t.BG_IMG);o&&(n().bgOverlay.style.backgroundImage=`url(${o})`);const r=await fetch(e.bgImg.url),s=await r.blob(),c=new FileReader;c.readAsDataURL(s),c.onloadend=()=>{const e=c.result;localStorage.setItem(t.BG_IMG,e),o||(n().bgOverlay.style.backgroundImage=`url(${e})`)}}e.init(),e.setWidgets(WidgetSearch,WidgetWelcome,WidgetClock,WidgetBookmarks),e.start()}